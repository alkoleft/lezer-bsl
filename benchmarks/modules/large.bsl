Процедура СложнаяОбработка(ВходныеДанные)
    Перем Результат = Новый Структура;
    Перем ВременныйМассив = Новый Массив;
    Перем Индекс = 0;
    
    Попытка
        Для Каждого Элемент Из ВходныеДанные Цикл
            Если Элемент <> Неопределено Тогда
                Перем ОбработанныйЭлемент = ОбработатьЭлемент(Элемент);
                
                Если ОбработанныйЭлемент.Валидный Тогда
                    ВременныйМассив.Добавить(ОбработанныйЭлемент);
                    
                    Если ОбработанныйЭлемент.Приоритет > 10 Тогда
                        Перем СпециальнаяОбработка = ВыполнитьСпециальнуюОбработку(ОбработанныйЭлемент);
                        Результат.Вставить("Важный", СпециальнаяОбработка);
                    ИначеЕсли ОбработанныйЭлемент.Приоритет > 5 Тогда
                        Результат.Вставить("Средний", ОбработанныйЭлемент);
                    Иначе
                        Результат.Вставить("Обычный", ОбработанныйЭлемент);
                    КонецЕсли;
                    
                    Индекс = Индекс + 1;
                    
                    Если Индекс > 1000 Тогда
                        Прервать;
                    КонецЕсли;
                КонецЕсли;
            КонецЕсли;
        КонецЦикла;
        
        Результат.Вставить("ОбщееКоличество", Индекс);
        Результат.Вставить("Массив", ВременныйМассив);
        
    Исключение
        Перем СообщениеОбОшибке = ОписаниеОшибки();
        Результат.Вставить("Ошибка", СообщениеОбОшибке);
    КонецПопытки;
    
    Возврат Результат;
КонецПроцедуры

Функция ОбработатьЭлемент(Элемент)
    Перем Результат = Новый Структура;
    
    Результат.Вставить("Валидный", Истина);
    Результат.Вставить("Приоритет", 0);
    Результат.Вставить("Значение", Неопределено);
    
    Если ТипЗнч(Элемент) = Тип("Структура") Тогда
        Результат.Вставить("Значение", Элемент.Значение);
        Результат.Вставить("Приоритет", Элемент.Приоритет);
        
        Если НЕ (Элемент.Свойство("Значение") И Элемент.Свойство("Приоритет")) Тогда
            Результат.Вставить("Валидный", Ложь);
        КонецЕсли;
    ИначеЕсли ТипЗнч(Элемент) = Тип("Число") Тогда
        Результат.Вставить("Значение", Элемент);
        Результат.Вставить("Приоритет", 5);
    Иначе
        Результат.Вставить("Валидный", Ложь);
    КонецЕсли;
    
    Возврат Результат;
КонецФункции

Функция ВыполнитьСпециальнуюОбработку(Элемент)
    Перем Результат = Новый Структура;
    Перем ВременнаяПеременная = 0;
    
    Для Счетчик = 1 По 10 Цикл
        ВременнаяПеременная = ВременнаяПеременная + Элемент.Значение * Счетчик;
        
        Если Счетчик % 2 = 0 Тогда
            ВременнаяПеременная = ВременнаяПеременная / 2;
        КонецЕсли;
    КонецЦикла;
    
    Результат.Вставить("ОбработанноеЗначение", ВременнаяПеременная);
    Результат.Вставить("ИсходноеЗначение", Элемент.Значение);
    Результат.Вставить("ИсходныйПриоритет", Элемент.Приоритет);
    
    Возврат Результат;
КонецФункции

Процедура ВспомогательнаяФункция1()
    Перем а = 1;
    Перем б = 2;
    Перем в = а + б;
    Перем г = а * б;
    Перем д = в / г;
КонецПроцедуры

Процедура ВспомогательнаяФункция2(Параметр1, Знач Параметр2)
    Если Параметр1 > Параметр2 Тогда
        Возврат Параметр1;
    ИначеЕсли Параметр1 < Параметр2 Тогда
        Возврат Параметр2;
    Иначе
        Возврат 0;
    КонецЕсли;
КонецПроцедуры
